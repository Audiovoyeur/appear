<!DOCTYPE html>
<html lang="en">
<head>
<title>appear.js</title>
<style>
html, body {
    margin: 10px;
    padding: 0;
}
h1, h2, h3 {
    margin: 5px;
}
.content {
    font-size: 100px;
    font-weight: bold;
}
.content-top {
    height: 1600px;
    display: block;
}
.content-bottom {
    height: 1600px;
    display: block;
}
.footer {
    height: 200px;
}
</style>
<script src="/lib/appear.js"></script>
<script>
appear({
  // function to get all elements to track
  elements: function elements(){
    return document.getElementsByClassName('footer');
  },
  // function to run when an element is in view
  appear: function appear(el){
    console.log('footer is visible');
    el.innerHTML = '<h3 class="done">now scroll back up</h3>';
  },
  // called when all nodes are visible
  done: function done(){
    console.log('footer done');
  }
});

appear({
  // function to get all elements to track
  elements: function elements(){
    return document.getElementsByClassName('encourage');
  },
  // function to run when an element is in view
  appear: function appear(el){
    el.innerHTML = 'keep going...';
  },
  // function to run when an element is in view
  disappear: function disappear(el){
    el.innerHTML = 'keep on going...';
  },
  done: function done(){
    console.log('removed listener on encourage message');
  }
});

(function(){
  var header = appear(
  (function(){
      var count = 0;
      return {
        // function to get all elements to track
        elements: function elements(){
          return document.getElementsByTagName('H1');
        },
        // function to run when an element is in view
        appear: function appear(el){
          console.log('HEADER IN VIEW');
          count++;
          if(count >= 7) {
            header.destroy();
            el.innerHTML = 'appear test page - ok that\'s enough';
          } else if(count > 1) {
            el.innerHTML = 'appear test page - reappeared ' + (count -1) + ' time' + (count === 2 ? '' : 's');
          }
        },
        // function to run when an element goes out of view
        disappear: function appear(el){
          console.log('HEADER __NOT__ IN VIEW');
        },
        reappear: true
      };
  }())
  );
}());

</script>
</head>
<body>

<h1>appear test page</h1>
<div class="content content-top">scroll down</div>
<div class="content content-bottom"><h3 class="encourage"></h3></div>
<div class="content footer"></div>
</body>
</html>
